<!DOCTYPE html>
<html>
<head>
<title>XRX++ Unit Tests - xrx.shape.Shapes</title>
<script src='../../../../lib/closure-library/closure/goog/base.js'></script>
<script src='../../../deps.js'></script>
<script type="text/javascript">
  goog.require('goog.testing.jsunit');
  goog.require('goog.dom.DomHelper');
  goog.require('xrx');
</script>
<style>
table {
border-collapse: collapse;
}
td {
border: solid grey 1px;
}
</style>
</head>
<body>

<img id="testImage" src="./shape_test.png" style="display:none"></img>
<table>
  <tr>
    <td></td>
	  <td><span>Circle</span></td>
	  <td><span>Ellipse</span></td>
	  <td><span>Group</span></td>
	  <td><span>Image</span></td>
	  <td><span>Line</span></td>
	  <td><span>Polygon</span></td>
	  <td><span>Poly-line</span></td>
	  <td><span>Rectangle</span></td>
  </tr>
  <tr>
    <td><span>Canvas</span></td>
	  <td id="canvasCircle"></td>
	  <td id="canvasEllipse"></td>
	  <td id="canvasGroup"></td>
	  <td id="canvasImage"></td>
	  <td id="canvasLine"></td>
	  <td id="canvasPolygon"></td>
	  <td id="canvasPolyline"></td>
	  <td id="canvasRect"></td>
  </tr>
  <tr>
    <td><span>SVG</span></td>
	  <td id="svgCircle"></td>
	  <td id="svgEllipse"></td>
	  <td id="svgGroup"></td>
	  <td id="svgImage"></td>
	  <td id="svgLine"></td>
	  <td id="svgPolygon"></td>
	  <td id="svgPolyline"></td>
	  <td id="svgRect"></td>
  </tr>
  <tr>
    <td><span>VML</span></td>
	  <td id="vmlCircle"></td>
	  <td id="vmlEllipse"></td>
	  <td id="vmlGroup"></td>
	  <td id="vmlImage"></td>
	  <td id="vmlLine"></td>
	  <td id="vmlPolygon"></td>
	  <td id="vmlPolyline"></td>
	  <td id="vmlRect"></td>
  </tr>
  <tr>
    <td><span>Comment</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
	  <td><span>Look alike?</span></td>
  </tr>
</table>

<script type="text/javascript">



function getCanvasCanvas(id) {
  var divCanvas = goog.dom.getElement(id);
  var engine = new xrx.engine.Engine(xrx.engine.CANVAS);
  var canvas = xrx.shape.Canvas.create(divCanvas, engine);
  canvas.setWidth(100);
  canvas.setHeight(100);
  return canvas;
};



function getCanvasSvg(id) {
  var divSvg = goog.dom.getElement(id);
  var engine = new xrx.engine.Engine(xrx.engine.SVG);
  var canvas = xrx.shape.Canvas.create(divSvg, engine);
  canvas.setWidth(100);
  canvas.setHeight(100);
  return canvas;
};



function getCanvasVml(id) {
  var divVml = goog.dom.getElement(id);
  var engine = new xrx.engine.Engine(xrx.engine.VML);
  var canvas = xrx.shape.Canvas.create(divVml, engine);
  canvas.setWidth(100);
  canvas.setHeight(100);
  return canvas;
};



function makeStyle(shape) {
  shape.setStrokeColor('red');
  shape.setStrokeWidth(2);
  shape.setFillColor('green');
  shape.setFillOpacity(.5);
};



function getCircle(canvas) {
  var circle = xrx.shape.Circle.create(canvas);
  circle.setCenter(50, 50);
  circle.setRadius(30);
  makeStyle(circle);
  return circle;
};



function getEllipse(canvas) {
  var ellipse = xrx.shape.Ellipse.create(canvas);
  ellipse.setCenter(50, 50);
  ellipse.setRadiusX(10);
  ellipse.setRadiusY(40);
  makeStyle(ellipse);
  return ellipse;
};



function getImage(canvas) {
  var img = xrx.shape.Image.create(canvas);
  img.setImage(goog.dom.getElement('testImage'));
  return img;
};



function getLine(canvas) {
  var line = xrx.shape.Line.create(canvas);
  line.setX1(10);
  line.setY1(10);
  line.setX2(90);
  line.setY2(90);
  line.setStrokeColor('red');
  line.setStrokeWidth(4);
  return line;
};



function getPolygon(canvas) {
  var coords = new Array(3);
  coords[0] = [10,10];
  coords[1] = [90,0];
  coords[2] = [0,60];
  var polygon = xrx.shape.Polygon.create(canvas);
  polygon.setCoords(coords);
  makeStyle(polygon);
  return polygon;
};



function getPolyline(canvas) {
  var coords = new Array(4);
  coords[0] = [10,10];
  coords[1] = [90,90];
  coords[2] = [5,60];
  coords[3] = [30,40];
  var polyline = xrx.shape.Polyline.create(canvas);
  polyline.setCoords(coords);
  polyline.setStrokeColor('red');
  polyline.setStrokeWidth(4);
  return polyline;
};



function getRect(canvas) {
  var rect = xrx.shape.Rect.create(canvas);
  rect.setX(10);
  rect.setY(10);
  rect.setWidth(10);
  rect.setHeight(10);
  makeStyle(rect);
  return rect;
};



function getGroup(canvas) {
  var group = xrx.shape.Group.create(canvas);
  group.addChildren([this.getCircle(canvas),
      this.getImage(canvas), this.getPolyline(canvas)]);
  return group;
};



function test1Shapes() {
  var shapes = ['Circle', 'Ellipse', 'Group', 'Image', 'Line', 'Polygon', 'Polyline', 'Rect'];
  var shape;
  for (var i = 0, len = shapes.length; i < len; i++) {
    shape = shapes[i];
    if (!xrx.engine.isOldIE()) {
      // Canvas
      var canvasCanvas = getCanvasCanvas('canvas' + shape);
      var canvasShape = this['get' + shape](canvasCanvas);
      canvasCanvas.addChildren(canvasShape);
      canvasCanvas.draw();
      // SVG
      var svgCanvas = getCanvasSvg('svg' + shape);
      var svgShape = this['get' + shape](svgCanvas);
      svgCanvas.addChildren(svgShape);
      svgCanvas.draw();
    }
    // VML
    var vmlCanvas = getCanvasVml('vml' + shape);
    var vmlShape = this['get' + shape](vmlCanvas);
    vmlCanvas.addChildren(vmlShape);
    vmlCanvas.draw();
  }
};

</script>
</body>
</html>